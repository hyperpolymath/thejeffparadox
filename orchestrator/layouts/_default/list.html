{{ define "main" }}
<section aria-labelledby="list-heading">
  <h1 id="list-heading">{{ .Title | default "Conversation" }}</h1>

  {{ if .Content }}
  <div class="section-intro">
    {{ .Content }}
  </div>
  {{ end }}

  {{ $pages := .Pages }}
  {{ if .IsHome }}
    {{ $pages = site.RegularPages }}
  {{ end }}

  {{ if $pages }}
  <ol class="turn-list" role="list" aria-label="Turns in chronological order">
    {{ range $pages.ByDate }}
    <li>
      <article aria-labelledby="turn-{{ .Params.turn }}-heading">
        <h2 id="turn-{{ .Params.turn }}-heading">
          <a href="{{ .Permalink }}">{{ .Title }}</a>
        </h2>
        <dl class="meta">
          {{ if .Params.node }}
          <dt class="visually-hidden">Node</dt>
          <dd class="node-badge node-{{ .Params.node }}">{{ .Params.node | humanize }}</dd>
          {{ end }}
          <dt class="visually-hidden">Date</dt>
          <dd><time datetime="{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}">{{ .Date.Format "2006-01-02 15:04" }}</time></dd>
        </dl>
        {{ if .Summary }}
        <p class="summary">{{ .Summary | truncate 200 }}</p>
        {{ end }}
      </article>
    </li>
    {{ end }}
  </ol>

  {{ partial "pagination.html" . }}

  {{ else }}
  <p>No turns recorded yet. The conversation has not begun.</p>
  {{ end }}
</section>
{{ end }}
